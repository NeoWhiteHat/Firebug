<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
  <title>Test Case for memory leaks</title>
</head>
<body>

<h1>Memory leaks</h1>

<p>This test-case is intended for memory leaks
<i>Jan Odvarko, odvarko@gmail.com</i>
</p>

<ol>
<li>Open Taks manager and watch Firefox memory consumption</li>
<li>Click on the <code style="color:green">Open Popup</code> button and close
the opened window. Repeat and watch memory consumption</li>
<li>The memory is not released after the popup window is closed.</li>
</ol>

<button id="openPopup" onclick="onOpenPopup()">Open Popup</button>

<script type="text/javascript">
function onOpenPopup()
{
    var popup = window.open("memory-popup.html", "bug", "width=500");

    // Catch load event and notify possible listener (test driver).
    popup.addEventListener("load", function()
    {
        var event = document.createEvent("Events");
        event.initEvent("popup-loaded", true, false);
        document.setUserData("popup-window", popup, null);
        document.dispatchEvent(event);
    }, false);
}
</script>

</body>
</html>
