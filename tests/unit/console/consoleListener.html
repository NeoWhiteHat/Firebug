<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
          "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<script src="../env.js" type="text/javascript"></script>
<script>
window.onload = function() {
enablePrivilege("UniversalXPConnect");

var log = false;
var logFormatted = false;

var consoleListener = 
{
    log: function(context, object, className, sourceLink) {
        fireunit.ok(!log, "log must be called just once");
        log = true;
    },

    logFormatted: function(context, object, className, sourceLink) {
        fireunit.ok(!logFormatted, "logFormatted must be called just once");
        logFormatted = true;
    }
}

try {
    Firebug.Console.addListener(consoleListener);
    Firebug.Console.log(document);
    console.log("log");
}
catch (err) {
    fireunit.ok(false, "consoleListener.htm exception");
}
finally {
    Firebug.Console.removeListener(consoleListener);
}

fireunit.ok(log, "log callback verified");
fireunit.ok(logFormatted, "logFormatted callback verified");

// Finish test
FBTrace.sysout("fireunit.netPanelListener.DONE");
fireunit.testDone();
};
</script>
</head>
<body>
<h1>Test for Console panel listener.</h1>
</body>
</html>
