<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
          "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <script type="text/javascript" src="env.js" ></script>
    <script type="text/javascript" src="chrome://firebug/content/domplate.js" ></script>
    <link rel="stylesheet" href="startNet.css" type="text/css"/>
</head>
<body>
    <button onclick="runTests()">Run All</button>
    <br/><br/>
    <div id="testList"/>
<script>
// Reload page using http:
if (fireunit.forceHttp()) {

// Registered Tests
//-----------------------------------------------------------------------------

var testDesc = [
    {uri: "net/netPanel.html",          desc: "Existence of net panel" },
    {uri: "net/netEntry.html",          desc: "Existence of a simple entry in net panel" },
    {uri: "net/netEntryBody.html",      desc: "Net entry can be expanded and info body is there" }, 
    {uri: "net/issue176.html",          desc: "Filter for Flash requests" },
    {uri: "net/issue601.html",          desc: "Response Tab" },
    {uri: "net/issue1256.html",         desc: "Params Tab" },
    {uri: "net/issue372.html",          desc: "Post Tab" },
    {uri: "net/issue700.html",          desc: "HTML Tab" },
    {uri: "net/issue1299.html",         desc: "Firebug must cache even responses coming from FF cache" },
    {uri: "net/issue1308.html",         desc: "+ sign in POST (proper encoding, Copy Location With Parameters)" },
    {uri: "net/netPanelListener.html",  desc: "Test listener for Firebug.NetMonitor" },
    {uri: "net/netInfoBodyListener.html", desc: "Test listener for Firebug.NetMonitor.NetInfoBody" },
    {uri: "net/netSpyListener.html",    desc: "Test listener for Firebug.Spy" },
    {uri: "net/netCacheListener.html",  desc: "Test listener for Firebug.Spy" },
    {uri: "net/issue369.html",          desc: "Inspect JSON data in HTTP responses" },
    {uri: "net/netSelection.html",      desc: "Test for Net panel selection using chrome.select and NetFileLink" },
];

//-----------------------------------------------------------------------------

// Run all tests in one test suite.
function runTests() {
    var tests = [];
    for (var i=0; i<testDesc.length; i++)
        tests.push(testDesc[i].uri);
    fireunit.runTests.apply(fireunit, tests);
}

with (FBL) {

// Test List Template
//-----------------------------------------------------------------------------

var TestList = domplate(
{
    tag:
        TABLE({"class": "testTable", cellpadding: 0, cellspacing: 0},
            TBODY(
                FOR("test", "$tests",
                    TR({"class": "testListRow", _repObject: "$test"},
                        TD({"class": "testListCol testUri"},
                            SPAN({"class": "testLink", 
                                onclick: "$onTestClick"},
                                SPAN("$test.uri")
                            )
                        ),
                        TD({"class": "testListCol testDesc"},
                            SPAN("$test.desc")
                        )
                    )
                )
            )
        ),

    onTestClick: function(event)
    {
        if (isLeftClick(event))
        {
            var row = getAncestorByClass(event.target, "testListRow");
            var testObj = row.repObject;
            fireunit.runTests(testObj.uri);
            cancelEvent(event);
        }
    }
});

// Build test list UI
var content = document.getElementById("testList");
TestList.tag.replace({tests: testDesc}, content);

//-----------------------------------------------------------------------------
}} 

</script>
</body>
</html>
