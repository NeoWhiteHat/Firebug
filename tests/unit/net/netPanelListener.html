<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
          "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<script src="env.js" type="text/javascript"></script>
<script src="utils.js" type="text/javascript"></script>
<script>
enablePrivilege("UniversalXPConnect");

var onLoad = false;
var netPanelListener = 
{
    onLoad: function(context, file) {
        fireunit.ok(!onLoad, "onLoad must be called just once");
        onLoad = true;
    }
}

var NetMonitor = Firebug.NetMonitor;
NetMonitor.addListener(netPanelListener);

makeRequest("GET", "netPanelListener.txt", function(request)
{
    enablePrivilege("UniversalXPConnect");
    FBTrace.sysout("fireunit.netPanelListener.check callbacks from Firebug.NetMonitor.");

    NetMonitor.removeListener(netPanelListener);

    fireunit.ok(onLoad, "onLoad callback verified");

    // Finish test
    FBTrace.sysout("fireunit.netPanelListener.DONE");
    fireunit.testDone();
});

</script>
</head>
<body>
<h1>Test for Firebug.NetMonitor listener.</h1>
</body>
</html>
